<!doctype html>
<html lang="en">

<head>
    <base href="./">
    <link rel="apple-touch-icon" sizes="192x192" id="apple-touch-icon" href="assets/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" id="favicon-32" href="assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" id="favicon-16" href="assets/icons/favicon-16x16.png">
    <link rel="manifest" href="manifest.webmanifest">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ThinLine Radio</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1e1e1e">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&family=Share+Tech+Mono&family=Audiowide&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <!-- Try to use custom favicon if uploaded -->
    <script>
        (function() {
            // Check if custom favicon exists
            fetch('/favicon', { method: 'HEAD' })
                .then(response => {
                    if (response.ok) {
                        // Custom favicon exists, use it for all icons
                        var appleTouchIcon = document.getElementById('apple-touch-icon');
                        var favicon32 = document.getElementById('favicon-32');
                        var favicon16 = document.getElementById('favicon-16');
                        
                        if (appleTouchIcon) appleTouchIcon.href = '/favicon';
                        if (favicon32) favicon32.href = '/favicon';
                        if (favicon16) favicon16.href = '/favicon';
                    }
                })
                .catch(function() {
                    // Custom favicon doesn't exist, keep default icons
                });
        })();
    </script>
    <!-- Capture invitation code BEFORE Angular loads -->
    <script>
        (function() {
            try {
                var urlParams = new URLSearchParams(window.location.search);
                var inviteCode = urlParams.get('invite');
                if (inviteCode) {
                    console.log('Captured invitation code from URL:', inviteCode);
                    sessionStorage.setItem('pendingInviteCode', inviteCode);
                }
            } catch (e) {
                console.error('Error capturing invite code:', e);
            }
        })();
    </script>
</head>

<body>
    <app-root></app-root>
    <noscript>
        Please enable JavaScript to continue using this application.
    </noscript>
</body>

</html>